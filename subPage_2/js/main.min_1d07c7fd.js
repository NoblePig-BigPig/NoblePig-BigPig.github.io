function pf_toEnumValueFromKey(t,e){var r=t[e];return void 0!==r?r:void 0}function pf_loadRemoteScript(t,e){function r(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,r){var n=document.createElement("script");n.src=t,n.addEventListener("load",function(){return e()}),n.addEventListener("error",function(){return r(new Error("Failed to load script: "+t))}),document.body.appendChild(n)})]})})}return 0===t.length?void e():void Promise.all(t.map(r)).then(function(){e()})["catch"](function(t){throw pf_throwError("Unable to load all scripts from remote server.",t)})}function pf_randomFloatRange(t,e,r){return void 0===r&&(r=!0),t==e?t:t>e?Math.random()*(t-e+(r?1:0))+e:Math.random()*(e-t+(r?1:0))+t}function pf_doesEventOccurInUniformDistribution(t){return pf_randomFloatRange(0,100)<=t}function pf_randomIntRange(t,e,r){return void 0===r&&(r=!0),t==e?t:t>e?Math.floor(Math.random()*(t-e+(r?1:0)))+e:Math.floor(Math.random()*(e-t+(r?1:0)))+t}function pf_randomNormal(t,e){for(var r=0,n=0;0===r;)r=Math.random();for(;0===n;)n=Math.random();return t+e*Math.sqrt(-2*Math.log(r))*Math.cos(2*Math.PI*n)}function pf_doesEventOccurInNormalDistribution(t,e,r){return pf_randomNormal(t,e)<=r}function pf_throwError(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];throw new Error("Unexpected Error:\n"+t+"\n"+JSON.stringify(e))}function pf_toBooleanFromString(t,e){if(void 0===e&&(e=!1),"string"!=typeof t)return e;var r=t.trim().toLowerCase();return-1!==["true","1","yes","y","on"].indexOf(r)?!0:-1!==["false","0","no","n","off"].indexOf(r)?!1:e}function pf_getUrlParameterMap(t){var e=new Map,r=t.split("?")[1];if(r)for(var n=r.split("&"),i=0,o=n;i<o.length;i++){var a=o[i],u=a.split("="),s=u[0],c=u[1];if(s){var l=decodeURIComponent(s),f=decodeURIComponent(c);e.set(l,f)}}return e}function pf_toEnumValueFromValue(t,e){for(var r in t)if(t[r]===e)return e}function pf_toFloatFromString(t,e){void 0===e&&(e=0/0);var r=0/0;return"number"==typeof t&&(r=Math.floor(t)),"string"==typeof t&&(r=parseFloat(t)),isNaN(r)?e:r}function pf_toIntFromNumber(t,e){void 0===e&&(e=0/0);var r=Math.floor(t);return isNaN(r)?e:r}function pf_toIntFromString(t,e){void 0===e&&(e=0/0);var r=parseInt(t,10);return isNaN(r)?e:r}function pf_toStringFromAny(t,e){switch(void 0===e&&(e=""),typeof t){case"object":return null!==t?JSON.stringify(t):e;case"number":return isNaN(t)?e:t.toString();case"function":return t.name?"[Function: "+t.name+"]":"[Function]";case"string":return t;case"boolean":return t.toString();case"symbol":return t.toString();case"undefined":return e;default:return e}}function pf_wait(t){return new Promise(function(e){setTimeout(function(){e()},1e3*t)})}function pf_waitFunction(t){var e=this;return new Promise(function(r){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return t()?[3,2]:[4,pf_wait(.02)];case 1:return e.sent(),[3,0];case 2:return r(),[2]}})})})}function pf_delayCall(t,e){var r=this;return new Promise(function(n){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,pf_wait(t)];case 1:return r.sent(),[4,e()];case 2:return r.sent(),n(),[2]}})})})}var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},__awaiter=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function a(t){try{s(n.next(t))}catch(e){o(e)}}function u(t){try{s(n["throw"](t))}catch(e){o(e)}}function s(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(a,u)}s((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(n){r=[6,n],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,u,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},App=function(t){function e(){var e=t.call(this)||this;return e.initBar(),e.initBonus(),e}return __extends(e,t),e.prototype.initBar=function(){this._rewardContainer=document.getElementsByClassName("reward-container")[0];var t=document.getElementById("adTypeSelector"),e=document.getElementById("adContent"),r={reward:"這是一個獎勵型廣告，觀看後可獲得 100 金幣！",banner:"這是一個橫幅廣告，適合展示產品資訊。",video:"這是一個影片廣告，提供豐富的多媒體內容！"};t.addEventListener("change",function(){if(e){var n=t.value;e.textContent=r[n]||"請選擇一種廣告類型。"}})},e.prototype.initBonus=function(){var t=this,e=document.getElementById("playButton"),r=document.getElementById("rewardVideo"),n=document.getElementById("rewardMessage");e.addEventListener("click",function(){e.style.display="none",r.style.display="block",r.play()}),r.addEventListener("ended",function(){r.style.display="none",n.style.display="block"});var i=document.getElementById("adTypeSelector");i.addEventListener("change",function(){i.value;switch(i.value){case"reward":t._rewardContainer.hidden=!1;break;default:t._rewardContainer.hidden=!0}})},e}(egret.DisplayObject);__reflect(App.prototype,"App");var Clocker=function(){function t(){var t=this;this._isPageVisible=!0,this._alarms=[],this._previousTime=0,this._keySetTimeout=-1,this._triggerTime=500,this._previousTime=performance.now(),this._isPageVisible=!document.hidden,document.addEventListener("visibilitychange",function(){document.hidden?(t._isPageVisible=!1,t.update()):(clearTimeout(t._keySetTimeout),t._isPageVisible=!0,t.update())}),this.update()}return t.prototype.calculateTriggerTime=function(){return 0===this._alarms.length?void(this._triggerTime=500):void(this._triggerTime=Math.min.apply(Math,this._alarms.map(function(t){var e=(0===t.currentTimes?t.startTime:t.interval)-t.currentTime;return Math.max(e,0)}).concat([50])))},t.prototype.update=function(){var t=performance.now(),e=t-this._previousTime;this._previousTime=t,this.processAlrams(e),this.updateNext()},t.prototype.updateNext=function(){var t=this;this._isPageVisible?requestAnimationFrame(function(){return t.update()}):this._keySetTimeout=setTimeout(function(){return t.update()},this._triggerTime)},t.prototype.processAlrams=function(t){for(var e=this,r=[],n=this._alarms.length-1;n>=0;n--){var i=this._alarms[n];if(!i.isPause){i.currentTime||(i.currentTime=0),i.currentTimes||(i.currentTimes=0),i.currentTime+=t;try{0===i.currentTimes&&i.currentTime>=i.startTime?(i.currentTimes++,i.method(i.totalTimes,i.totalTimes-i.currentTimes,t),i.currentTime=0):i.currentTimes>0&&i.currentTime>=i.interval&&(i.currentTimes++,i.method(i.totalTimes,i.totalTimes-i.currentTimes,t),i.currentTime-=i.interval),-1!==i.totalTimes&&i.currentTimes>=i.totalTimes&&r.push(i)}catch(o){console.error("PureClocker error",o)}}}r.forEach(function(t){return e.removeAlarm(t.AID)})},t.prototype.addAlarm=function(t,e,r,n){try{if(this._alarms.some(function(t){return t.method===n&&t.startTime===e&&t.interval===r}))return console.warn("相同提醒已存在，無法重複添加"),null;var i={AID:t+"_"+e+"_"+r+"_"+performance.now(),isPause:!1,currentTime:0,currentTimes:0,totalTimes:t,startTime:e,interval:r,method:n};return this._alarms.push(i),this.calculateTriggerTime(),this._isPageVisible||(clearTimeout(this._keySetTimeout),this.update()),i.AID}catch(o){return console.error("Error adding alarm:",o),null}},t.prototype.removeAlarm=function(t){var e=this._alarms.findIndex(function(e){return e.AID===t});return-1!==e&&this._alarms.splice(e,1),this.calculateTriggerTime(),t},t.prototype.pauseAlarm=function(t){var e=this._alarms.findIndex(function(e){return e.AID===t});return-1!==e&&(this._alarms[e].isPause=!0),t},t.prototype.resumeAlarm=function(t){var e=this._alarms.findIndex(function(e){return e.AID===t});return-1!==e&&(this._alarms[e].isPause=!1),t},t}();__reflect(Clocker.prototype,"Clocker",["IClockerFunction"]);var tool_clocker=new Clocker;